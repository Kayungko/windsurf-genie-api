# äº‘ç«¯çœŸå®åœ°å€åº“éƒ¨ç½²è¯´æ˜

## ğŸ¯ æ–¹æ¡ˆæ¦‚è¿°

å°†çœŸå®åœ°å€åº“æ”¾åœ¨äº‘æœåŠ¡å™¨ä¸Šï¼Œå®ç°ï¼š
- âœ… æ‰©å±•åŒ…ä½“ç§¯å°
- âœ… åœ°å€åº“å¯åŠ¨æ€æ›´æ–°
- âœ… æ”¯æŒè‡ªåŠ¨åŒ–æ‰©å±•
- âœ… é›†ä¸­ç®¡ç†

---

## ğŸ“¦ æ¶æ„è®¾è®¡

```
ä¼˜å…ˆçº§æµç¨‹ï¼š
1ï¸âƒ£ äº‘ç«¯çœŸå®åœ°å€åº“ API
   â””â”€ http://64.69.40.34:8082/real-address?country=US&state=CA&city=Los Angeles
   â””â”€ è¿”å›çœŸå®è¡—é“åœ°å€

2ï¸âƒ£ RandomUser.me APIï¼ˆå¦‚æœäº‘ç«¯æ²¡æœ‰æˆ–å¤±è´¥ï¼‰
   â””â”€ æ”¯æŒ 21 ä¸ªå›½å®¶
   â””â”€ è¿”å›éšæœºç”Ÿæˆçš„åœ°å€

3ï¸âƒ£ è‡ªå»ºéšæœºç”¨æˆ· APIï¼ˆæœ€åå…œåº•ï¼‰
   â””â”€ ä½¿ç”¨ Faker.js ç”Ÿæˆç¾å›½åœ°å€
```

---

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šç”Ÿæˆåœ°å€åº“æ•°æ®

åœ¨äº‘æœåŠ¡å™¨ä¸Šè¿è¡Œè‡ªåŠ¨åŒ–è„šæœ¬ï¼š

```bash
# SSH ç™»å½•äº‘æœåŠ¡å™¨
ssh root@64.69.40.34

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /root/windsurf-genie-api

# è¿è¡Œåœ°å€åº“ç”Ÿæˆè„šæœ¬ï¼ˆæ¯ä¸ªåŸå¸‚ 100 æ¡åœ°å€ï¼‰
node scripts/generate-addresses.js 100

# æŸ¥çœ‹ç”Ÿæˆç»“æœ
ls -lh data/real-addresses.json
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
ğŸ—ï¸  å¼€å§‹ç”Ÿæˆç¾å›½åœ°å€åº“...
ğŸ“Š é…ç½®: æ¯ä¸ªåŸå¸‚ 100 æ¡åœ°å€

ğŸŒ California (CA)
   âœ… Los Angeles: 100 æ¡åœ°å€
   âœ… San Francisco: 100 æ¡åœ°å€
   âœ… San Diego: 100 æ¡åœ°å€
   âœ… San Jose: 100 æ¡åœ°å€
   âœ… Sacramento: 100 æ¡åœ°å€

ğŸŒ New York (NY)
   âœ… New York: 100 æ¡åœ°å€
   âœ… Buffalo: 100 æ¡åœ°å€
   ...

âœ… åœ°å€åº“ç”Ÿæˆå®Œæˆ!
ğŸ“¦ æ€»è®¡: 3000 æ¡åœ°å€
ğŸ“ æ–‡ä»¶: /root/windsurf-genie-api/data/real-addresses.json
ğŸ’¾ å¤§å°: 285.43 KB
```

---

### ç¬¬äºŒæ­¥ï¼šé‡å¯ API æœåŠ¡

```bash
# é‡å¯ pm2 æœåŠ¡
pm2 restart windsurf-genie-api

# æŸ¥çœ‹æ—¥å¿—
pm2 logs windsurf-genie-api

# æµ‹è¯•åœ°å€åº“ API
curl "http://localhost:8082/real-address?country=US&state=CA&city=Los%20Angeles"
```

**è¿”å›ç¤ºä¾‹**ï¼š
```json
{
  "street": "5163 Hollywood Blvd",
  "zip": "90028",
  "city": "Los Angeles",
  "state": "CA",
  "country": "US",
  "source": "database"
}
```

---

### ç¬¬ä¸‰æ­¥ï¼šéªŒè¯æ‰©å±•è°ƒç”¨

åœ¨æµè§ˆå™¨æ‰©å±•ä¸­æµ‹è¯•ï¼š

1. æ‰“å¼€æ‰©å±•ï¼Œé€‰æ‹©"ğŸ‡ºğŸ‡¸ ç¾å›½"
2. ç‚¹å‡»"ç«‹å³å¡«å……"
3. æ‰“å¼€æ§åˆ¶å°ï¼ˆF12ï¼‰ï¼Œè§‚å¯Ÿæ—¥å¿—ï¼š

```
ğŸ”„ æ­£åœ¨ä»äº‘ç«¯çœŸå®åœ°å€åº“è·å–åœ°å€...
âœ… è·å–åˆ°çœŸå®åœ°å€: { street: "5163 Hollywood Blvd", city: "Los Angeles", ... }
```

---

## ğŸ”§ API ç«¯ç‚¹è¯´æ˜

### `/real-address` - æŸ¥è¯¢çœŸå®åœ°å€

**è¯·æ±‚**ï¼š
```
GET /real-address?country=US&state=CA&city=Los%20Angeles
```

**å‚æ•°**ï¼š
- `country` (å¿…å¡«): å›½å®¶ä»£ç ï¼ˆç›®å‰åªæ”¯æŒ `US`ï¼‰
- `state` (å¯é€‰): å·ä»£ç ï¼ˆå¦‚ `CA`, `NY`, `TX`ï¼‰
- `city` (å¯é€‰): åŸå¸‚åï¼ˆå¦‚ `Los Angeles`, `New York`ï¼‰

**æŸ¥è¯¢é€»è¾‘**ï¼š
- å¦‚æœæä¾›äº† `city` + `state`ï¼šä»è¯¥åŸå¸‚éšæœºè¿”å›ä¸€æ¡åœ°å€
- å¦‚æœåªæä¾›äº† `state`ï¼šä»è¯¥å·æ‰€æœ‰åŸå¸‚ä¸­éšæœºé€‰ä¸€ä¸ªï¼Œå†éšæœºè¿”å›ä¸€æ¡åœ°å€
- å¦‚æœåªæä¾›äº† `country`ï¼šä»æ‰€æœ‰å·ä¸­éšæœºé€‰ä¸€ä¸ªï¼Œå†ä»è¯¥å·éšæœºé€‰åŸå¸‚å’Œåœ°å€

**è¿”å›ç¤ºä¾‹**ï¼š
```json
{
  "street": "5163 Hollywood Blvd",
  "zip": "90028",
  "city": "Los Angeles",
  "state": "CA",
  "country": "US",
  "source": "database"
}
```

---

## ğŸ“ˆ æ‰©å±•åœ°å€åº“

### æ–¹æ³• 1ï¼šè°ƒæ•´ç”Ÿæˆæ•°é‡

```bash
# ç”Ÿæˆæ›´å¤šåœ°å€ï¼ˆæ¯ä¸ªåŸå¸‚ 200 æ¡ï¼‰
node scripts/generate-addresses.js 200

# ç”Ÿæˆæ›´å°‘åœ°å€ï¼ˆæ¯ä¸ªåŸå¸‚ 50 æ¡ï¼Œé€‚åˆæµ‹è¯•ï¼‰
node scripts/generate-addresses.js 50
```

### æ–¹æ³• 2ï¼šæ·»åŠ æ–°çš„å·å’ŒåŸå¸‚

ç¼–è¾‘ `scripts/generate-addresses.js`ï¼š

```js
const US_LOCATIONS = {
  // æ·»åŠ æ–°å·
  AZ: {
    name: 'Arizona',
    cities: ['Phoenix', 'Tucson'],
    zipRanges: {
      'Phoenix': { min: 85001, max: 85099 },
      'Tucson': { min: 85701, max: 85799 }
    }
  },
  
  // ç°æœ‰çš„å·...
  CA: { ... },
  NY: { ... }
};
```

ç„¶åé‡æ–°è¿è¡Œè„šæœ¬ã€‚

### æ–¹æ³• 3ï¼šæ‰‹åŠ¨æ·»åŠ çœŸå®åœ°å€

ç¼–è¾‘ `data/real-addresses.json`ï¼š

```json
{
  "US": {
    "CA": {
      "Los Angeles": [
        {"street": "1234 Sunset Blvd", "zip": "90028"},
        {"street": "5678 Hollywood Blvd", "zip": "90028"}
      ]
    }
  }
}
```

---

## ğŸŒ æ‰©å±•åˆ°å…¶ä»–å›½å®¶

### æœªæ¥æ”¯æŒè®¡åˆ’

ç›®å‰åªæ”¯æŒç¾å›½ï¼ˆUSï¼‰ï¼Œå¯æ‰©å±•åˆ°ï¼š

1. **è‹±å›½ (GB)**
   ```json
   {
     "GB": {
       "London": [
         {"street": "10 Downing Street", "postcode": "SW1A 2AA"}
       ]
     }
   }
   ```

2. **åŠ æ‹¿å¤§ (CA)**
   ```json
   {
     "CA": {
       "ON": {
         "Toronto": [
           {"street": "123 Yonge St", "postcode": "M5B 2H1"}
         ]
       }
     }
   }
   ```

3. **æ¾³å¤§åˆ©äºš (AU)**
   ```json
   {
     "AU": {
       "NSW": {
         "Sydney": [
           {"street": "1 Macquarie St", "postcode": "2000"}
         ]
       }
     }
   }
   ```

---

## ğŸ“Š å½“å‰æ•°æ®ç»Ÿè®¡

è¿è¡Œ `node scripts/generate-addresses.js 100` åï¼š

```
æ€»åœ°å€æ•°: ~3000 æ¡
è¦†ç›–èŒƒå›´:
â”œâ”€ 10 ä¸ªå· (CA, NY, TX, FL, IL, WA, MA, PA, GA, CO)
â”œâ”€ 30 ä¸ªåŸå¸‚
â””â”€ æ–‡ä»¶å¤§å°: ~285 KB

å·åˆ†å¸ƒ:
â”œâ”€ CA: 5 ä¸ªåŸå¸‚ Ã— 100 æ¡ = 500 æ¡
â”œâ”€ NY: 4 ä¸ªåŸå¸‚ Ã— 100 æ¡ = 400 æ¡
â”œâ”€ TX: 4 ä¸ªåŸå¸‚ Ã— 100 æ¡ = 400 æ¡
â”œâ”€ FL: 4 ä¸ªåŸå¸‚ Ã— 100 æ¡ = 400 æ¡
...
```

---

## ğŸ” ä¼˜åŠ¿å¯¹æ¯”

| ç‰¹æ€§ | åŸç‰ˆï¼ˆæ‰©å±•æœ¬åœ°ï¼‰ | äº‘ç«¯åœ°å€åº“ |
|------|-----------------|-----------|
| **æ•°æ®é‡** | 90 æ¡ | 3000+ æ¡ |
| **æ‰©å±•åŒ…ä½“ç§¯** | å¢åŠ  | ä¸å˜ |
| **æ›´æ–°** | éœ€é‡æ–°å‘å¸ƒæ‰©å±• | åªéœ€æ›´æ–°æœåŠ¡å™¨æ•°æ® |
| **é‡å¤ç‡** | é«˜ï¼ˆ90æ¡å¾ªç¯ï¼‰ | ä½ï¼ˆ3000+æ¡ï¼‰ |
| **é€Ÿåº¦** | æå¿«ï¼ˆæœ¬åœ°ï¼‰ | å¿«ï¼ˆç½‘ç»œè¯·æ±‚ ~50msï¼‰ |
| **ç»´æŠ¤** | åˆ†æ•£ | é›†ä¸­ |

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç½‘ç»œä¾èµ–**
   - äº‘ç«¯åœ°å€åº“éœ€è¦ç½‘ç»œè¯·æ±‚
   - å¦‚æœç½‘ç»œå¤±è´¥ï¼Œä¼šè‡ªåŠ¨å›é€€åˆ° RandomUser API

2. **å›½å®¶æ”¯æŒ**
   - ç›®å‰åªæ”¯æŒç¾å›½
   - å…¶ä»–å›½å®¶ä¼šè‡ªåŠ¨å›é€€åˆ° RandomUser API

3. **ç¼“å­˜ç­–ç•¥**
   - API ä¸åšç¼“å­˜ï¼Œæ¯æ¬¡è¿”å›éšæœºåœ°å€
   - å¦‚éœ€ç¼“å­˜ï¼Œå¯åœ¨æ‰©å±•ç«¯å®ç°

4. **æ•°æ®çœŸå®æ€§**
   - ä½¿ç”¨ Faker.js ç”Ÿæˆï¼Œè¡—é“åçœŸå®ä½†ç»„åˆæ˜¯éšæœºçš„
   - é‚®ç¼–èŒƒå›´çœŸå®ï¼Œä½†å…·ä½“ç»„åˆå¯èƒ½ä¸å­˜åœ¨

---

## ğŸ“ æµ‹è¯•æ¸…å•

- [ ] ç”Ÿæˆåœ°å€åº“æ•°æ®ï¼ˆ`node scripts/generate-addresses.js 100`ï¼‰
- [ ] é‡å¯ pm2 æœåŠ¡
- [ ] æµ‹è¯• API ç«¯ç‚¹ï¼ˆ`curl http://localhost:8082/real-address?country=US`ï¼‰
- [ ] åœ¨æ‰©å±•ä¸­æµ‹è¯•ï¼ˆé€‰æ‹©ç¾å›½ï¼Œç‚¹å‡»å¡«å……ï¼‰
- [ ] éªŒè¯åœ°å€å¤šæ ·æ€§ï¼ˆå¤šæ¬¡å¡«å……ï¼Œè§‚å¯Ÿåœ°å€æ˜¯å¦é‡å¤ï¼‰
- [ ] æµ‹è¯•å›é€€æœºåˆ¶ï¼ˆå…³é—­äº‘ç«¯ APIï¼ŒéªŒè¯æ˜¯å¦å›é€€åˆ° RandomUserï¼‰

---

## ğŸš€ æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. **æ·»åŠ ç¼“å­˜**ï¼ˆå¯é€‰ï¼‰
   ```js
   // åœ¨ index.js ä¸­æ·»åŠ å†…å­˜ç¼“å­˜
   let addressDbCache = null;
   
   async function loadAddressDatabase() {
     if (addressDbCache) return addressDbCache;
     const dbPath = path.join(__dirname, 'data/real-addresses.json');
     const dbContent = await fs.readFile(dbPath, 'utf-8');
     addressDbCache = JSON.parse(dbContent);
     return addressDbCache;
   }
   ```

2. **å‹ç¼©å“åº”**ï¼ˆå¯é€‰ï¼‰
   ```js
   import compression from 'compression';
   app.use(compression());
   ```

3. **æ·»åŠ ç›‘æ§**
   ```bash
   # ç›‘æ§ API è°ƒç”¨
   pm2 install pm2-logrotate
   pm2 logs windsurf-genie-api --lines 100
   ```

---

**éƒ¨ç½²å®Œæˆï¼** ğŸ‰

ç°åœ¨ä½ çš„æ‰©å±•ä¼šä¼˜å…ˆä½¿ç”¨äº‘ç«¯çš„çœŸå®åœ°å€åº“ï¼Œæä¾›æ›´å¤šæ ·åŒ–ã€æ›´çœŸå®çš„åœ°å€æ•°æ®ã€‚
